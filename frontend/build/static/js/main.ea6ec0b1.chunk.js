(this.webpackJsonpsaleapp=this.webpackJsonpsaleapp||[]).push([[0],{199:function(e,t,n){},201:function(e,t,n){},301:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n.n(c),a=n(33),s=n.n(a),i=(n(199),n(200),n(201),n(181)),d=n(31),l=n(29),j=n(60),o=n(21),u=n.n(o),b=n(28),h=n(15),x=n(305),O=n(306),p=n(188),m=n(86),v=n(35),f=n(309),y=n(97),g=n(59),F=n(307),k=n(303),S=n(131),I=n(310),w=n(311),C=n(312);function A(e){return"$"+(null===e||void 0===e?void 0:e.toFixed(2).replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,"))}function E(e){return(e=Math.floor(e)).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}var T=4e3,N="",P=n(1);v.a.Group;function q(e){var t=e.handleRemoveOrder,n=(e.handlePlusQty,e.handleMinusQty,e.handleEditQty);return[{title:"N\xb0",dataIndex:"no",key:"no",width:50,render:function(e,t,n){return Object(P.jsx)(I.b,{size:"middle",children:n+=1})}},{title:"Item",dataIndex:"name",key:"name",width:150},{title:"Quantity",dataIndex:"qty",key:"qty",width:100,render:function(e,t){return Object(P.jsx)(I.b,{size:"middle",children:Object(P.jsx)(F.a,{type:"number",min:0,onChange:function(e){return n(Object(l.a)(Object(l.a)({},t),{},{newValue:e.target.value}))},value:t.qty})})}},{title:"Price",dataIndex:"price",key:"price",width:100},{title:"Amount",dataIndex:"amount",key:"amount",width:150,render:function(e,t){return Object(P.jsxs)("span",{size:"middle",children:[E((null===t||void 0===t?void 0:t.qty)*(null===t||void 0===t?void 0:t.price)*T),"\u17db"]})}},{key:"action",dataIndex:"action",fixed:"right",width:50,align:"center",render:function(e,n){return Object(P.jsx)(I.b,{size:"middle",children:Object(P.jsx)(w.a,{title:"Do you want to remove this item?",onConfirm:function(){return t(n._id)},okText:"Yes",cancelText:"No",style:{cursor:"pointer"},children:Object(P.jsx)(v.a,{className:"link",style:{color:"red"},children:Object(P.jsx)(C.a,{})})})})}}]}n.p;var D=n(313);function z(e){var t,n,c=e.item,r=e.handleClick;return Object(P.jsx)(g.a,{xs:24,sm:8,md:6,style:{padding:10},children:Object(P.jsxs)(v.a,{style:{width:"100%",height:"100%"},onClick:function(){return r(c)},disabled:c.inStock<=0,children:[Object(P.jsxs)("div",{style:{position:"relative"},children:[Object(P.jsx)(D.a,{style:{fontSize:100,color:"#CCCCCC"}}),Object(P.jsxs)("div",{className:"price-tag",children:[Object(P.jsxs)("span",{style:{fontSize:14},children:[E(c.price*T),"\u17db"]}),Object(P.jsx)("br",{}),A(c.price)]})]}),Object(P.jsx)("span",{style:{textAlign:"center"},children:null===(t=c.name)||void 0===t?void 0:t.toUpperCase()}),Object(P.jsx)("br",{}),Object(P.jsx)("span",{style:{textAlign:"center"},children:c.inStock>0?"Stock: "+(null===(n=c.inStock.toString())||void 0===n?void 0:n.toUpperCase()):"Not available"})]})})}var _=n(319),Q=n(320),L=n(321),R=n(322),M=n(106),Y=n(308),V=M.a.Option;function G(e){var t=e.open,c=e.setOpen,r=e.setSuccess,a=n(41),s=O.a.useForm(),i=Object(h.a)(s,1)[0],d=function(){var e=Object(b.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a.post("/api/product",t);case 3:r(!0),c(!1),i.resetFields(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),p.b.error(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(P.jsx)(f.a,{title:"CREATE NEW PRODUCT",visible:t,onOk:function(){return c(!1)},onCancel:function(){return c(!1)},footer:null,children:Object(P.jsx)(O.a,{form:i,name:"addProduct",onFinish:function(e){d(e)},onFinishFailed:function(e){console.log("Failed:",e)},children:Object(P.jsxs)(y.a,{children:[Object(P.jsx)(g.a,{xs:24,md:{span:11},children:Object(P.jsx)(O.a.Item,{name:"name",rules:[{required:!0,message:"Fields is required!"}],children:Object(P.jsx)(F.a,{placeholder:"name"})})}),Object(P.jsx)(g.a,{xs:24,md:{span:11,offset:2},children:Object(P.jsx)(O.a.Item,{name:"category",rules:[{required:!0,message:"Fields is required!"}],children:Object(P.jsxs)(M.a,{placeholder:"category",style:{width:"100%"},children:[Object(P.jsx)(V,{value:"VEGETABLE",children:"VEGETABLE"}),Object(P.jsx)(V,{value:"MEAT",children:"MEAT"}),Object(P.jsx)(V,{value:"FRUIT",children:"FRUIT"}),Object(P.jsx)(V,{value:"CAKE",children:"CAKE"}),Object(P.jsx)(V,{value:"EGG",children:"EGG"})]})})}),Object(P.jsx)(g.a,{xs:24,md:{span:11,offset:0},children:Object(P.jsx)(O.a.Item,{name:"inStock",rules:[{required:!0,message:"Fields is required!"}],children:Object(P.jsx)(Y.a,{min:0,placeholder:"in stock",style:{width:"100%"}})})}),Object(P.jsx)(g.a,{xs:24,md:{span:11,offset:2},children:Object(P.jsx)(O.a.Item,{name:"price",rules:[{required:!0,message:"Fields is required!"}],children:Object(P.jsx)(Y.a,{min:0,placeholder:"price $",style:{width:"100%"}})})}),Object(P.jsx)(g.a,{xs:24,md:{span:11,offset:0},children:Object(P.jsx)(O.a.Item,{name:"remark",children:Object(P.jsx)(F.a,{placeholder:"remark"})})}),Object(P.jsx)(g.a,{xs:24,children:Object(P.jsx)(v.a,{htmlType:"submit",type:"primary",style:{width:"100%"},children:"CREATE"})})]})})})}v.a.Group;function U(){var e=n(41),t=Object(c.useState)([]),r=Object(h.a)(t,2),a=r[0],s=r[1],i=Object(c.useState)(!1),d=Object(h.a)(i,2),l=(d[0],d[1],Object(c.useState)(!1)),j=Object(h.a)(l,2),o=(j[0],j[1],Object(c.useState)({})),x=Object(h.a)(o,2),O=(x[0],x[1],Object(c.useState)(!0)),m=Object(h.a)(O,2),v=m[0],f=m[1],y=function(){var t=Object(b.a)(u.a.mark((function t(){var n,c;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.get("api/dashboard/salelist");case 3:n=t.sent,c=n.data,s(c),f(!1),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),p.b.error(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(){return t.apply(this,arguments)}}();return Object(c.useEffect)((function(){y()}),[]),Object(P.jsx)(P.Fragment,{children:Object(P.jsx)(k.a,{columns:[{title:"N\xb0",dataIndex:"no",key:"no",width:50,render:function(e,t,n){return Object(P.jsx)(I.b,{size:"middle",children:n+=1})}},{title:"Product",dataIndex:"_id",key:"_id",width:150},{title:"Total QTY",dataIndex:"totalQty",key:"totalQty",width:100},{title:"Total Sale",dataIndex:"totalSaleAmount",key:"totalSaleAmount",width:150,render:function(e,t){return Object(P.jsxs)("span",{size:"middle",children:["USD: ",A(null===t||void 0===t?void 0:t.totalSaleAmount),", KHRIEL: ",E((null===t||void 0===t?void 0:t.totalSaleAmount)*T)," \u17db"]})}},{key:"action",dataIndex:"action",fixed:"right",width:50,align:"center"}],dataSource:a,pagination:!1,loading:v})})}var B=n(314),H=n(315),K=n(316),$=n(317),J=n(34),W=n.n(J);v.a.Group;function Z(e){var t=e.handleEdit,n=e.handleDeliver,c=e.handlePrintInvoice,r=e.handleCancel;return[{title:"N\xb0",dataIndex:"no",key:"no",width:50,render:function(e,t,n){return Object(P.jsx)(I.b,{size:"middle",children:n+=1})}},{title:"#Invoice",dataIndex:"invoiceID",key:"invoiceID",width:150},{title:"Date",dataIndex:"createdAt",key:"createdAt",width:150,render:function(e,t,n){return Object(P.jsx)(I.b,{size:"middle",children:W()(t.createdAt).format("DD-MMM-YYYY hh:mm:ss a")})}},{title:"Product",dataIndex:"product",key:"product",width:100,render:function(e,t,n){var c;return Object(P.jsx)(I.b,{size:"middle",children:null===t||void 0===t||null===(c=t.orderItems)||void 0===c?void 0:c.length})}},{title:"Discount",dataIndex:"discount",key:"discount",width:150},{title:"Tax",dataIndex:"taxPrice",key:"taxPrice",width:150},{title:"Total Price",dataIndex:"totalPrice",key:"totalPrice",width:100,render:function(e,t,n){return Object(P.jsxs)("span",{size:"middle",children:[E((null===t||void 0===t?void 0:t.totalPrice)*T),"\u17db"]})}},{title:"Payment",dataIndex:"isPaid",key:"isPaid",width:100,render:function(e,t,n){var c=Object(P.jsx)("span",{className:"status-pending",children:"Pending"});return!0===(null===t||void 0===t?void 0:t.isDelivered)&&(c=Object(P.jsx)("span",{className:"status-delivered",children:"Delivered"})),!0===(null===t||void 0===t?void 0:t.isPaid)&&(c=Object(P.jsx)("span",{className:"status-paid",children:"Paid"})),!0===(null===t||void 0===t?void 0:t.isCancel)&&(c=Object(P.jsx)("span",{className:"status-cancel",children:"Cancel"})),Object(P.jsx)(I.b,{size:"middle",style:{width:"100%"},children:c})}},{key:"action",dataIndex:"action",fixed:"right",width:50,align:"center",render:function(e,a){return Object(P.jsxs)(I.b,{size:"middle",children:[Object(P.jsx)(w.a,{title:"Are you sure to confirm delivery?",onConfirm:function(){return n(a)},okText:"Yes",cancelText:"No",style:{cursor:"pointer"},disabled:null===a||void 0===a?void 0:a.isCancel,children:Object(P.jsx)(v.a,{className:"link",disabled:null===a||void 0===a?void 0:a.isCancel,style:{color:"#1d39c4"},children:Object(P.jsx)(B.a,{})})}),Object(P.jsx)(v.a,{className:"link",style:{color:"#ad8b00"},onClick:function(){return t(a)},disabled:null===a||void 0===a?void 0:a.isCancel,children:Object(P.jsx)(H.a,{})}),Object(P.jsx)(v.a,{className:"link",onClick:function(){return c(a)},disabled:null===a||void 0===a?void 0:a.isCancel,children:Object(P.jsx)(K.a,{})}),Object(P.jsx)(w.a,{title:"Are you sure to cancel this order?",onConfirm:function(){return r(a)},okText:"Yes",cancelText:"No",style:{cursor:"pointer"},disabled:null===a||void 0===a?void 0:a.isCancel,children:Object(P.jsx)(v.a,{className:"link",disabled:null===a||void 0===a?void 0:a.isCancel,children:Object(P.jsx)($.a,{})})})]})}}]}var X=M.a.Option;function ee(e){var t=e.open,c=e.setOpen,r=e.setSuccess,a=e.data;console.log(a);var s=n(41),i=O.a.useForm(),d=Object(h.a)(i,1)[0],l=function(){var e=Object(b.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.put(N+"/api/order/".concat(null===a||void 0===a?void 0:a._id,"/pay"),t);case 3:r(!0),c(!1),d.resetFields(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(P.jsx)(f.a,{title:"INVOICE",visible:t,onOk:function(){return c(!1)},onCancel:function(){return c(!1)},footer:null,children:Object(P.jsx)(O.a,{form:d,name:"EditInvoice",onFinish:function(e){l(e)},onFinishFailed:function(e){console.log("Failed:",e)},children:Object(P.jsxs)(y.a,{children:[Object(P.jsx)(g.a,{xs:24,md:{span:24,offset:0},children:Object(P.jsx)(O.a.Item,{name:"paymentMethod",rules:[{required:!0,message:"Fields is required!"}],children:Object(P.jsxs)(M.a,{placeholder:"payment method",style:{width:"100%"},children:[Object(P.jsx)(X,{value:"CASH",children:"CASH"}),Object(P.jsx)(X,{value:"ABA",children:"ABA"}),Object(P.jsx)(X,{value:"\u1791\u17bc\u1791\u17b6\u178f\u17cb\u1795\u17d2\u1791\u17b6\u179b\u17cb",children:"\u1791\u17bc\u1791\u17b6\u178f\u17cb\u1795\u17d2\u1791\u17b6\u179b\u17cb"})]})})}),Object(P.jsx)(g.a,{xs:24,children:Object(P.jsx)(v.a,{htmlType:"submit",type:"primary",style:{width:"100%"},children:"PAY"})})]})})})}function te(e){var t=e.handlePrintInvoice,r=n(41),a=Object(c.useState)([]),s=Object(h.a)(a,2),i=s[0],d=s[1],l=Object(c.useState)(!1),j=Object(h.a)(l,2),o=j[0],x=j[1],O=Object(c.useState)(!1),m=Object(h.a)(O,2),v=m[0],f=m[1],y=Object(c.useState)({}),g=Object(h.a)(y,2),F=g[0],S=g[1],I=Object(c.useState)(!0),w=Object(h.a)(I,2),C=w[0],A=w[1];Object(c.useEffect)((function(){fetch("api/order").then((function(e){return e.json()})).then((function(e){console.log(e),A(!1),d(e)}))}),[v]);var E=function(){var e=Object(b.a)(u.a.mark((function e(t){var n,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.put(N+"api/order/".concat(t,"/deliver"));case 3:n=e.sent,!0===(c=n.data).success?(f(!0),p.b.success("Order is delivered!")):p.b.error(c.message),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),p.b.error(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=Object(b.a)(u.a.mark((function e(t){var n,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.put(N+"api/order/".concat(t,"/cancel"));case 3:n=e.sent,!0===(c=n.data).success?(f(!0),p.b.info("Order is cancel!")):p.b.error(c.message),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),p.b.error(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){f(!1)}),[v]);return Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)(ee,{open:o,setOpen:x,setSuccess:f,data:F}),Object(P.jsx)(k.a,{className:"order-table",columns:Z({handleEdit:function(e){S(e),x(!0)},handleDeliver:function(e){E(e._id)},handlePrintInvoice:t,handleCancel:function(e){console.log(e),T(e._id)}}),dataSource:i,pagination:!1,loading:C},null===i||void 0===i?void 0:i._id)]})}var ne=n(175),ce=n(176),re=n(192),ae=n(187),se=function(e){Object(re.a)(n,e);var t=Object(ae.a)(n);function n(){return Object(ne.a)(this,n),t.apply(this,arguments)}return Object(ce.a)(n,[{key:"render",value:function(){var e;console.log(this.props.printData);var t=this.props.printData;return Object(P.jsxs)("div",{style:{padding:20},className:"invoice-print",children:[Object(P.jsxs)("table",{className:"invoice-print",style:{width:"100%"},children:[Object(P.jsxs)("tr",{children:[Object(P.jsx)("td",{}),Object(P.jsx)("td",{}),Object(P.jsx)("td",{}),Object(P.jsxs)("td",{style:{textAlign:"center",fontSize:12},children:[Object(P.jsx)("b",{children:"\u179c\u17b7\u1780\u17d2\u1780\u1799\u1794\u178f\u17d2\u179a"})," "]})]}),Object(P.jsxs)("tr",{children:[Object(P.jsx)("td",{}),Object(P.jsx)("td",{}),Object(P.jsx)("td",{style:{textAlign:"right"},children:"\u1780\u17b6\u179b\u1794\u179a\u17b7\u1785\u17d2\u1786\u17c1\u1791"}),Object(P.jsx)("td",{style:{textAlign:"center",border:"0.5px solid #CCCC"},children:W()(null===t||void 0===t?void 0:t.createdAt).format("DD-MMM-YYYY")})]}),Object(P.jsxs)("tr",{children:[Object(P.jsx)("td",{}),Object(P.jsx)("td",{children:"\u1797\u17bc\u1798\u17b7\u1790\u17d2\u1798\u17b8 \u179f\u1784\u17d2\u1780\u17b6\u178f\u17cb\u179f\u17d2\u179c\u17b6\u1799\u178a\u1784\u17d2\u1782\u17c6 \u1780\u17d2\u179a\u17bb\u1784\u179f\u17c0\u1798\u179a\u17b6\u1794 \u1781\u17c1\u178f\u17d2\u178f\u179f\u17c0\u1798\u179a\u17b6\u1794"}),Object(P.jsx)("td",{style:{textAlign:"right"},children:"\u179b\u17c1\u1781\u179c\u17b7\u1780\u17d2\u1780\u1799\u1794\u178f\u17d2\u179a"}),Object(P.jsx)("td",{style:{textAlign:"center",border:"0.5px solid #CCCC"},children:null===t||void 0===t?void 0:t.invoiceID})]}),Object(P.jsxs)("tr",{children:[Object(P.jsx)("td",{}),Object(P.jsx)("td",{children:"\u179b\u17c1\u1781\u1791\u17bc\u179a\u179f\u17d0\u1796\u17d2\u1791\u17c8 085 332 047"}),Object(P.jsx)("td",{style:{textAlign:"right"},children:"\u179b\u17c1\u1781\u1780\u17bc\u178a\u17a2\u178f\u17b7\u1790\u17b7\u1787\u1793"}),Object(P.jsx)("td",{style:{textAlign:"center",border:"0.5px solid #CCCC"}})]}),Object(P.jsxs)("tr",{children:[Object(P.jsx)("td",{colSpan:"2",style:{backgroundColor:"#000000",textAlign:"center",width:"60%",color:"#FFFFFF",fontSize:10},children:Object(P.jsx)("b",{children:"\u1796\u17d0\u178f\u17cc\u1798\u17b6\u1793\u17a2\u178f\u17b7\u1790\u17b7\u1787\u1793"})}),Object(P.jsx)("td",{}),Object(P.jsx)("td",{})]}),Object(P.jsxs)("tr",{children:[Object(P.jsx)("td",{style:{width:"15%"},children:"\u1788\u17d2\u1798\u17c4\u17c7"}),Object(P.jsxs)("td",{children:["\u17d6 ",null===t||void 0===t?void 0:t.client]}),Object(P.jsx)("td",{}),Object(P.jsx)("td",{})]}),Object(P.jsxs)("tr",{children:[Object(P.jsx)("td",{children:"\u1780\u17d2\u179a\u17bb\u1798\u17a0\u17ca\u17bb\u1793"}),Object(P.jsx)("td",{children:"\u17d6"}),Object(P.jsx)("td",{}),Object(P.jsx)("td",{})]}),Object(P.jsxs)("tr",{children:[Object(P.jsx)("td",{children:"\u17a2\u17b6\u179f\u1799\u178a\u17d2\u178b\u17b6\u1793"}),Object(P.jsxs)("td",{children:["\u17d6 ",null===t||void 0===t?void 0:t.shippingAddress]}),Object(P.jsx)("td",{}),Object(P.jsx)("td",{})]}),Object(P.jsxs)("tr",{children:[Object(P.jsx)("td",{children:"\u179b\u17c1\u1781\u1791\u17bc\u179a\u179f\u17d0\u1796\u17d2\u1791"}),Object(P.jsxs)("td",{children:["\u17d6 ",null===t||void 0===t?void 0:t.clientTel]}),Object(P.jsx)("td",{}),Object(P.jsx)("td",{})]})]}),Object(P.jsxs)("table",{className:"invoice-print description-order",style:{width:"100%"},children:[Object(P.jsxs)("tr",{style:{backgroundColor:"#AAA",color:"#FFF"},children:[Object(P.jsx)("th",{style:{textAlign:"left",fontSize:10},children:"\u179b.\u179a"}),Object(P.jsx)("th",{style:{textAlign:"center",width:"40%",fontSize:10},children:"\u1794\u179a\u17b7\u1799\u17b6\u1799"}),Object(P.jsx)("th",{style:{textAlign:"center",fontSize:10},children:"\u1785\u17c6\u1793\u17bd\u1793"}),Object(P.jsx)("th",{style:{textAlign:"center",fontSize:10},children:"\u178f\u1798\u17d2\u179b\u17c3\u179a\u17b6\u1799"}),Object(P.jsx)("th",{style:{textAlign:"center",fontSize:10},children:"\u178f\u1798\u17d2\u179b\u17c3\u179f\u179a\u17bb\u1794"})]}),null===t||void 0===t||null===(e=t.orderItems)||void 0===e?void 0:e.map((function(e,t){return Object(P.jsxs)("tr",{children:[Object(P.jsx)("td",{children:t+1}),Object(P.jsx)("td",{children:null===e||void 0===e?void 0:e.name}),Object(P.jsx)("td",{style:{textAlign:"center",width:"10%"},children:null===e||void 0===e?void 0:e.qty}),Object(P.jsxs)("td",{style:{textAlign:"center"},children:[E((null===e||void 0===e?void 0:e.price)*T)," \u17db"]}),Object(P.jsxs)("td",{style:{textAlign:"right"},children:[E((null===e||void 0===e?void 0:e.price)*(null===e||void 0===e?void 0:e.qty)*T)," \u17db"]})]})}))]}),Object(P.jsxs)("table",{className:"invoice-print",style:{width:"100%",marginTop:20},children:[Object(P.jsxs)("tr",{children:[Object(P.jsxs)("td",{style:{width:"50%"},children:["\u1785\u17c6\u178e\u17b6\u17c6\u17d6 ",null===t||void 0===t?void 0:t.paymentMethod]}),Object(P.jsx)("td",{style:{textAlign:"center",width:"10%"}}),Object(P.jsx)("td",{children:"\u179f\u179a\u17bb\u1794"}),Object(P.jsxs)("td",{style:{textAlign:"right"},children:[E((null===t||void 0===t?void 0:t.totalPrice)*T)," \u17db"]})]}),Object(P.jsxs)("tr",{children:[Object(P.jsx)("td",{}),Object(P.jsx)("td",{}),Object(P.jsx)("td",{children:"\u1794\u1789\u17d2\u1785\u17bb\u17c7\u178f\u1798\u17d2\u179b\u17c3"}),Object(P.jsx)("td",{style:{textAlign:"right"},children:null===t||void 0===t?void 0:t.discount})]}),Object(P.jsxs)("tr",{children:[Object(P.jsx)("td",{}),Object(P.jsx)("td",{}),Object(P.jsx)("td",{children:"\u179f\u179a\u17bb\u1794\u1785\u17bb\u1784\u1780\u17d2\u179a\u17c4\u1799"}),Object(P.jsxs)("td",{style:{textAlign:"right"},children:[E((null===t||void 0===t?void 0:t.totalPrice)*T)," \u17db"]})]}),Object(P.jsxs)("tr",{children:[Object(P.jsx)("td",{}),Object(P.jsx)("td",{}),Object(P.jsx)("td",{style:{backgroundColor:"#EEE"},children:"\u179b\u17bb\u1799\u1791\u1791\u17bd\u179b\u1794\u17b6\u1793"}),Object(P.jsx)("td",{style:{textAlign:"right",backgroundColor:"#EEE"},children:"0"})]}),Object(P.jsxs)("tr",{children:[Object(P.jsx)("td",{}),Object(P.jsx)("td",{}),Object(P.jsx)("td",{children:"\u179b\u17bb\u1799\u17a2\u17b6\u1794\u17cb"}),Object(P.jsx)("td",{style:{textAlign:"right"},children:"0"})]})]}),Object(P.jsxs)(y.a,{style:{marginTop:20,textAlign:"center"},children:[Object(P.jsx)(g.a,{xs:12,children:"\u17a2\u17d2\u1793\u1780\u179b\u1780\u17cb"}),Object(P.jsx)(g.a,{xs:12,children:"\u17a2\u17d2\u1793\u1780\u178a\u17b9\u1780\u1787\u1789\u17d2\u1787\u17bc\u1793"})]}),Object(P.jsx)(y.a,{style:{marginTop:70,textAlign:"center"},children:Object(P.jsx)(g.a,{xs:24,children:Object(P.jsx)("div",{children:Object(P.jsxs)("p",{children:["\u179f\u17bc\u1798\u17a2\u179a\u1782\u17bb\u178e\u178a\u17c2\u179b\u1794\u17b6\u1793\u1791\u17b7\u1789\u1791\u17c6\u1793\u17b7\u1789\u1796\u17b8\u17a0\u17d2\u1782\u17c4\u1782\u17d2\u179b\u17bc\u1794\u17ca\u179b\u1798\u17c9\u17b6\u178f\u200c\u200c!!",Object(P.jsx)("br",{}),"Thank you!! Please come again"]})})})})]})}}]),n}(c.Component),ie=n(177),de=n.n(ie),le=n(304),je=n(318);v.a.Group;function oe(e){var t=e.handleEdit,n=e.handleDelete;return[{title:"N\xb0",dataIndex:"no",key:"no",width:50,render:function(e,t,n){return Object(P.jsx)(I.b,{size:"middle",children:n+=1})}},{title:"Product",dataIndex:"productName",key:"productName",width:100},{title:"Category",dataIndex:"category",key:"category",width:80},{title:"Purchase Date",dataIndex:"purchaseDate",key:"purchaseDate",width:80,render:function(e,t){return Object(P.jsx)("span",{size:"middle",children:W.a.parseZone(null===t||void 0===t?void 0:t.purchaseDate).format("DD-MMM-YYYY")})}},{title:"QTY",dataIndex:"purchaseQty",key:"purchaseQty",width:40},{title:"Price",dataIndex:"purchasePrice",key:"purchasePrice",width:130,render:function(e,t){return Object(P.jsxs)("span",{size:"middle",children:["USD: ",A(null===t||void 0===t?void 0:t.purchasePrice),", KHRIEL: ",E((null===t||void 0===t?void 0:t.purchasePrice)*T)," \u17db"]})}},{title:"Shipping",dataIndex:"purchaseShippingPrice",key:"purchaseShippingPrice",width:80,render:function(e,t){return Object(P.jsx)("span",{size:"middle",children:A(null===t||void 0===t?void 0:t.purchaseShippingPrice)})}},{title:"Supplier",dataIndex:"supplier",key:"supplier",width:80,render:function(e,t){var n;return Object(P.jsx)("span",{size:"middle",children:null===t||void 0===t||null===(n=t.supplier)||void 0===n?void 0:n.name})}},{title:"Remark",dataIndex:"remark",key:"remark",width:100,render:function(e,t){return Object(P.jsx)("span",{size:"middle",children:null===t||void 0===t?void 0:t.remark})}},{key:"action",dataIndex:"action",fixed:"right",width:80,align:"center",render:function(e,c){return Object(P.jsxs)(I.b,{size:"middle",children:[Object(P.jsx)(v.a,{className:"link",style:{color:"#ad8b00"},onClick:function(){return t(c)},children:Object(P.jsx)(H.a,{})}),Object(P.jsx)(w.a,{title:"Do you want to remove this item?",onConfirm:function(){return n(c._id)},okText:"Yes",cancelText:"No",style:{cursor:"pointer"},children:Object(P.jsx)(v.a,{className:"link",style:{color:"red"},children:Object(P.jsx)(je.a,{})})})]})}}]}var ue=n(41),be=function(){var e=Object(b.a)(u.a.mark((function e(t){var n,c,r,a,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.data,c=t.setSuccess,r=t.form,e.prev=1,e.next=4,ue.post("api/purchase",n);case 4:a=e.sent,!0===(s=a.data).success?(c(!0),r.resetFields(),p.b.success("Product has been purchased!")):p.b.error(s.message),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),p.b.error(e.t0.message);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),he=n(41),xe=function(){var e=Object(b.a)(u.a.mark((function e(t){var n,c,r,a,s,i,d;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.keyword,c=t.pageNumber,r=t.limit,a=t.setData,s=t.setLoading,e.prev=1,e.next=4,he.get("api/purchase?keyword=".concat(n,"&pageNumber=").concat(c,"&limit=").concat(r));case 4:i=e.sent,d=i.data,a(d),s(!1),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),p.b.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}(),Oe=n(41),pe=function(){var e=Object(b.a)(u.a.mark((function e(t){var n,c,r,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.id,c=t.setSuccess,e.prev=1,e.next=4,Oe.delete("api/purchase/".concat(n));case 4:r=e.sent,!0===(a=r.data).success?(c(!0),p.b.info("Purchase has been deleted!")):p.b.error(a.message),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),p.b.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),me=n(41),ve=function(){var e=Object(b.a)(u.a.mark((function e(t){var n,c,r,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.editData,c=t.setSuccess,e.prev=1,e.next=4,me.put("api/purchase/".concat(n._id),n);case 4:r=e.sent,!0===(a=r.data).success?(c(!0),p.b.success("Purchase has been updated!")):p.b.error(a.message),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),p.b.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),fe=M.a.Option;function ye(e){var t,r=e.productData,a=O.a.useForm(),s=Object(h.a)(a,1)[0],i=(n(41),Object(c.useState)({})),d=Object(h.a)(i,2),j=d[0],o=d[1],u=Object(c.useState)(!1),b=Object(h.a)(u,2),x=(b[0],b[1],Object(c.useState)(!1)),p=Object(h.a)(x,2),m=p[0],f=p[1],S=Object(c.useState)({}),I=Object(h.a)(S,2),w=I[0],C=I[1],A=Object(c.useState)(!0),E=Object(h.a)(A,2),T=E[0],N=E[1],q=Object(c.useState)(""),D=Object(h.a)(q,2),z=D[0],_=(D[1],Object(c.useState)(0)),Q=Object(h.a)(_,2),L=Q[0],R=Q[1],Y=Object(c.useState)(15),V=Object(h.a)(Y,2),G=V[0],U=V[1],B=Object(c.useState)(!1),H=Object(h.a)(B,2),K=H[0],$=H[1],J=Object(c.useState)({}),Z=Object(h.a)(J,2),X=Z[0],ee=Z[1];Object(c.useEffect)((function(){xe({keyword:z,pageNumber:L,limit:G,setData:o,setLoading:N});f(!1)}),[m]);var te=function(e){var t=r.findIndex((function(t){return t._id===e}));ee(r[t])};return Object(P.jsx)(P.Fragment,{children:Object(P.jsxs)(y.a,{style:{backgroundColor:"#F7F9FC",padding:10},children:[Object(P.jsx)(g.a,{xs:24,children:Object(P.jsx)(O.a,{form:s,name:"addOrder",onFinish:function(e){var t=Object(l.a)(Object(l.a)({},e),{},{product:X._id,category:X.category,productName:X.name,purchaseDate:W()(e.purchaseDate),purchasePrice:parseFloat(e.purchasePrice),purchaseQty:parseInt(e.purchaseQty),purchaseShippingPrice:parseFloat(e.purchaseShippingPrice),remark:e.remark.trim(),supplier:{name:e.supplierName.trim(),tel:e.supplierTel.trim(),address:e.supplierAddress.trim()}});K?(ve({editData:Object(l.a)(Object(l.a)({},w),t),setSuccess:f}),s.resetFields()):be({data:t,setSuccess:f,form:s}),$(!1)},onFinishFailed:function(e){console.log("Failed:",e)},children:Object(P.jsxs)(y.a,{children:[Object(P.jsx)(g.a,{xs:4,style:{padding:5},children:Object(P.jsx)(O.a.Item,{name:"product",rules:[{required:!0,message:"Fields is required!"}],children:Object(P.jsx)(M.a,{placeholder:"product",style:{width:"100%"},onChange:function(e){return te(e)},children:null===r||void 0===r?void 0:r.map((function(e,t){return Object(P.jsx)(fe,{value:e._id,children:e.name})}))})})}),Object(P.jsx)(g.a,{xs:4,style:{padding:5},children:Object(P.jsx)(O.a.Item,{name:"purchaseDate",rules:[{required:!0,message:"Field is required!"}],children:Object(P.jsx)(le.a,{style:{width:"100%"},placeholder:"purchase date"})})}),Object(P.jsx)(g.a,{xs:4,style:{padding:5},children:Object(P.jsx)(O.a.Item,{name:"purchaseQty",rules:[{required:!0,message:"Field is required!"}],children:Object(P.jsx)(F.a,{type:"number",placeholder:"qty"})})}),Object(P.jsx)(g.a,{xs:4,style:{padding:5},children:Object(P.jsx)(O.a.Item,{name:"purchasePrice",rules:[{required:!0,message:"Field is required!"}],children:Object(P.jsx)(F.a,{type:"number",placeholder:"price $"})})}),Object(P.jsx)(g.a,{xs:4,style:{padding:5},children:Object(P.jsx)(O.a.Item,{name:"purchaseShippingPrice",children:Object(P.jsx)(F.a,{type:"number",placeholder:"shipping $"})})}),Object(P.jsx)(g.a,{xs:4,style:{padding:5},children:Object(P.jsx)(O.a.Item,{name:"remark",children:Object(P.jsx)(F.a,{placeholder:"remark"})})}),Object(P.jsx)(g.a,{xs:4,style:{padding:5},children:Object(P.jsx)(O.a.Item,{name:"supplierName",children:Object(P.jsx)(F.a,{placeholder:"supplier"})})}),Object(P.jsx)(g.a,{xs:4,style:{padding:5},children:Object(P.jsx)(O.a.Item,{name:"supplierTel",children:Object(P.jsx)(F.a,{placeholder:"supplier tel"})})}),Object(P.jsx)(g.a,{xs:4,style:{padding:5},children:Object(P.jsx)(O.a.Item,{name:"supplierAddress",children:Object(P.jsx)(F.a,{placeholder:"supplier address"})})}),Object(P.jsx)(g.a,{xs:4,style:{padding:5},children:Object(P.jsx)(O.a.Item,{children:Object(P.jsx)(v.a,{style:{width:"100%"},htmlType:"submit",className:"btn-grad",children:K?"EDIT":"PURCHASE"})})}),Object(P.jsx)(g.a,{xs:4,style:{padding:5},children:Object(P.jsx)(O.a.Item,{children:Object(P.jsx)(v.a,{onClick:function(){return s.resetFields(),void $(!1)},style:{width:"100%"},type:"danger",children:"CANCEL"})})})]})})}),Object(P.jsx)(g.a,{xs:24,children:Object(P.jsx)(k.a,{columns:oe({handleEdit:function(e){var t,n,c;$(!0),C(e),te(e.product),s.setFieldsValue(Object(l.a)(Object(l.a)({},e),{},{purchaseDate:W.a.parseZone(null===e||void 0===e?void 0:e.purchaseDate),supplierName:null===e||void 0===e||null===(t=e.supplier)||void 0===t?void 0:t.name,supplierTel:null===e||void 0===e||null===(n=e.supplier)||void 0===n?void 0:n.tel,supplierAddress:null===e||void 0===e||null===(c=e.supplier)||void 0===c?void 0:c.address}))},handleDelete:function(e){pe({id:e,setSuccess:f})}}),dataSource:null===j||void 0===j?void 0:j.purchases,pagination:{total:null===j||void 0===j||null===(t=j.paginator)||void 0===t?void 0:t.totalDocs,pageSize:G,onChange:function(e,t){R(e),U(t)}},scroll:{x:1100},sticky:!0,loading:T})})]})})}v.a.Group;var ge=n(41),Fe=function(){var e=Object(b.a)(u.a.mark((function e(t){var n,c,r,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.keyword,t.pageNumber,t.limit,n=t.setData,c=t.setLoading,e.prev=1,e.next=4,ge.get("api/dashboard/stock");case 4:r=e.sent,(a=r.data)&&(n(a),c(!1)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),p.b.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),ke=M.a.Option,Se=k.a.Column,Ie=k.a.ColumnGroup;function we(e){var t=e.productData,r=O.a.useForm(),a=Object(h.a)(r,1)[0],s=(n(41),Object(c.useState)([])),i=Object(h.a)(s,2),d=i[0],l=i[1],j=Object(c.useState)(!1),o=Object(h.a)(j,2),u=(o[0],o[1],Object(c.useState)(!1)),b=Object(h.a)(u,2),x=b[0],p=b[1],m=Object(c.useState)({}),f=Object(h.a)(m,2),F=(f[0],f[1],Object(c.useState)("")),S=Object(h.a)(F,2),I=S[0],w=(S[1],Object(c.useState)(0)),C=Object(h.a)(w,2),A=C[0],N=(C[1],Object(c.useState)(15)),q=Object(h.a)(N,2),D=q[0],z=(q[1],Object(c.useState)(!0)),_=Object(h.a)(z,2),Q=_[0],L=_[1],R=Object(c.useState)(!1),Y=Object(h.a)(R,2),V=Y[0],G=Y[1],U=Object(c.useState)({}),B=Object(h.a)(U,2),H=(B[0],B[1]);Object(c.useEffect)((function(){Fe({keyword:I,pageNumber:A,limit:D,setData:l,setLoading:L});p(!1)}),[x]);var K=function(e){var n=t.findIndex((function(t){return t._id===e}));H(t[n])};return Object(P.jsx)(P.Fragment,{children:Object(P.jsxs)(y.a,{style:{backgroundColor:"#F7F9FC",padding:10},children:[Object(P.jsx)(g.a,{xs:24,children:Object(P.jsx)(O.a,{form:a,name:"addOrder",onFinish:function(e){V&&a.resetFields()},onFinishFailed:function(e){console.log("Failed:",e)},children:Object(P.jsxs)(y.a,{children:[Object(P.jsx)(g.a,{xs:4,style:{padding:5},children:Object(P.jsx)(O.a.Item,{name:"product",children:Object(P.jsx)(M.a,{placeholder:"product",style:{width:"100%"},onChange:function(e){return K(e)},children:null===t||void 0===t?void 0:t.map((function(e,t){return Object(P.jsx)(ke,{value:e._id,children:e.name},e._id)}))})})}),Object(P.jsx)(g.a,{xs:4,style:{padding:5},children:Object(P.jsx)(O.a.Item,{name:"date",children:Object(P.jsx)(le.a,{style:{width:"100%"},placeholder:"date"})})}),Object(P.jsx)(g.a,{xs:4,style:{padding:5},children:Object(P.jsx)(O.a.Item,{children:Object(P.jsx)(v.a,{style:{width:"100%"},htmlType:"submit",className:"btn-grad",children:"SEARCH"})})}),Object(P.jsx)(g.a,{xs:4,style:{padding:5},children:Object(P.jsx)(O.a.Item,{children:Object(P.jsx)(v.a,{onClick:function(){return a.resetFields(),void G(!1)},style:{width:"100%"},type:"danger",children:"CANCEL"})})})]})})}),Object(P.jsx)(g.a,{xs:24,children:Object(P.jsxs)(k.a,{loading:Q,dataSource:d,pagination:!1,scroll:{x:1100},sticky:!0,children:[Object(P.jsx)(Se,{title:"N\xb0",dataIndex:"no",width:70,render:function(e,t,n){return Object(P.jsx)("span",{children:n+1})}},"no"),Object(P.jsx)(Se,{title:"Date",dataIndex:"purchaseDate"},"purchaseDate"),Object(P.jsx)(Se,{title:"Product",dataIndex:"productName"},"productName"),Object(P.jsxs)(Ie,{className:"merge-header",title:Object(P.jsx)("b",{style:{width:"100%",color:"#000000"},children:"PURCHASE"}),children:[Object(P.jsx)(Se,{title:"QTY",dataIndex:"purchaseQty"},"purchaseQty"),Object(P.jsx)(Se,{title:"Amount",dataIndex:"totalPurchaseAmount",render:function(e,t){return Object(P.jsxs)("span",{children:[E((null===t||void 0===t?void 0:t.totalPurchaseAmount)*T)," \u17db"]})}},"totalPurchaseAmount")]}),Object(P.jsxs)(Ie,{className:"merge-header",title:Object(P.jsx)("b",{style:{width:"100%",color:"#000000"},children:"SALE"}),children:[Object(P.jsx)(Se,{title:"QTY",dataIndex:"totalSaleQty"},"totalSaleQty"),Object(P.jsx)(Se,{title:"Amount",dataIndex:"totalSaleAmount",render:function(e,t){return Object(P.jsxs)("span",{children:[E((null===t||void 0===t?void 0:t.totalSaleAmount)*T)," \u17db"]})}},"totalSaleAmount")]}),Object(P.jsxs)(Ie,{className:"merge-header",title:Object(P.jsx)("b",{style:{width:"100%",color:"#000000"},children:"BALANCE"}),children:[Object(P.jsx)(Se,{title:"QTY",dataIndex:"balanceQty",render:function(e,t){return Object(P.jsx)("span",{children:(null===t||void 0===t?void 0:t.purchaseQty)-(null===t||void 0===t?void 0:t.totalSaleQty)})}},"balanceQty"),Object(P.jsx)(Se,{title:"Amount",dataIndex:"balanceAmount",render:function(e,t){return Object(P.jsxs)("span",{children:[E(((null===t||void 0===t?void 0:t.totalPurchaseAmount)-(null===t||void 0===t?void 0:t.totalSaleAmount))*T)," \u17db"]})}},"saleAmount")]})]})})]})})}var Ce=M.a.Option;function Ae(e){e.type;var t=e.data,n=e.title,c=e.value,r=e.setValue,a=(e.id,e.disabled);e.getNew;return Object(P.jsx)(M.a,{showSearch:!0,style:{width:"100%"},placeholder:n,value:c,onChange:function(e){return r(e)},disabled:a,optionFilterProp:"children",filterOption:function(e,t){return t.children.indexOf(e)>=0},filterSort:function(e,t){return e.children.localeCompare(t.children)},children:t.map((function(e){return Object(P.jsx)(Ce,{value:e._id,children:e.name},e._id)}))})}var Ee=M.a.Option;function Te(e){var t=e.open,r=e.setOpen,a=e.setSuccess,s=e.productList,i=n(41),d=O.a.useForm(),l=Object(h.a)(d,1)[0],j=Object(c.useState)({}),o=Object(h.a)(j,2),x=o[0],m=o[1],k=function(){var e=Object(b.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.put(N+"/api/product/".concat(t.product),t);case 3:a(!0),r(!1),l.resetFields(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),p.b.error(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){l.resetFields(),m({})}),[t]);return Object(P.jsx)(f.a,{title:"EDIT PRODUCT",visible:t,onOk:function(){return r(!1)},onCancel:function(){return r(!1)},footer:null,children:Object(P.jsx)(O.a,{form:l,name:"addProduct",onFinish:function(e){k(e)},onFinishFailed:function(e){console.log("Failed:",e)},children:Object(P.jsxs)(y.a,{children:[Object(P.jsx)(g.a,{xs:24,md:{span:24},children:Object(P.jsx)(O.a.Item,{name:"product",rules:[{required:!0,message:"Fields is required!"}],children:Object(P.jsx)(Ae,{title:"product",data:s,setValue:function(e){var t=s.findIndex((function(t){return t._id===e})),n=s[t];m(s[t]),l.setFieldsValue({product:e,name:n.name,category:n.category,inStock:n.inStock,price:n.price,remark:n.remark,active:n.active})}})})}),void 0!==(null===x||void 0===x?void 0:x._id)?Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)(g.a,{xs:24,md:{span:11},children:Object(P.jsx)(O.a.Item,{name:"name",rules:[{required:!0,message:"Fields is required!"}],children:Object(P.jsx)(F.a,{placeholder:"name"})})}),Object(P.jsx)(g.a,{xs:24,md:{span:11,offset:2},children:Object(P.jsx)(O.a.Item,{name:"category",rules:[{required:!0,message:"Fields is required!"}],children:Object(P.jsxs)(M.a,{placeholder:"category",style:{width:"100%"},children:[Object(P.jsx)(Ee,{value:"VEGETABLE",children:"VEGETABLE"}),Object(P.jsx)(Ee,{value:"MEAT",children:"MEAT"}),Object(P.jsx)(Ee,{value:"FRUIT",children:"FRUIT"}),Object(P.jsx)(Ee,{value:"CAKE",children:"CAKE"}),Object(P.jsx)(Ee,{value:"EGG",children:"EGG"})]})})}),Object(P.jsx)(g.a,{xs:24,md:{span:11,offset:0},children:Object(P.jsx)(O.a.Item,{name:"inStock",rules:[{required:!0,message:"Fields is required!"}],children:Object(P.jsx)(Y.a,{min:0,placeholder:"in stock",style:{width:"100%"}})})}),Object(P.jsx)(g.a,{xs:24,md:{span:11,offset:2},children:Object(P.jsx)(O.a.Item,{name:"price",rules:[{required:!0,message:"Fields is required!"}],children:Object(P.jsx)(Y.a,{min:0,placeholder:"price $",style:{width:"100%"}})})}),Object(P.jsx)(g.a,{xs:24,md:{span:11,offset:0},children:Object(P.jsx)(O.a.Item,{name:"active",rules:[{required:!0,message:"Fields is required!"}],children:Object(P.jsxs)(M.a,{placeholder:"status",children:[Object(P.jsx)(Ee,{value:!0,children:"ACTIVE"},"ACTIVE"),Object(P.jsx)(Ee,{value:!1,children:"INACTIVE"},"INACTIVE")]})})}),Object(P.jsx)(g.a,{xs:24,md:{span:24,offset:0},children:Object(P.jsx)(O.a.Item,{name:"remark",children:Object(P.jsx)(F.a,{placeholder:"remark"})})}),Object(P.jsx)(g.a,{xs:24,children:Object(P.jsx)(v.a,{htmlType:"submit",type:"primary",style:{width:"100%"},children:"EDIT"})})]}):null]})})})}var Ne=n(41),Pe=function(){var e=Object(b.a)(u.a.mark((function e(t){var n,c,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.data,c=t.setSuccess,r=t.form,e.prev=1,e.next=4,Ne.post(N+"/api/product/".concat(null===n||void 0===n?void 0:n.product,"/adjust"),n);case 4:c(!0),r.resetFields(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),p.b.error(e.t0.message+" eee");case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),qe=M.a.Option;function De(e){var t=e.open,r=e.setOpen,a=e.setSuccess,s=e.productList,i=(n(41),O.a.useForm()),d=Object(h.a)(i,1)[0],j=Object(c.useState)({}),o=Object(h.a)(j,2),u=o[0],b=o[1];Object(c.useEffect)((function(){d.resetFields(),b({})}),[t]);return Object(P.jsx)(f.a,{title:"STOCK ADJUSTMENT",visible:t,onOk:function(){return r(!1)},onCancel:function(){return r(!1)},footer:null,children:Object(P.jsx)(O.a,{form:d,name:"addProduct",onFinish:function(e){e=Object(l.a)(Object(l.a)({},e),{},{actualStock:parseFloat(e.actualStock),newStock:parseFloat(e.newStock)}),Pe({data:e,setSuccess:a,form:d}),r(!1)},onFinishFailed:function(e){console.log("Failed:",e)},children:Object(P.jsxs)(y.a,{children:[Object(P.jsx)(g.a,{xs:24,md:{span:24},children:Object(P.jsx)(O.a.Item,{name:"product",rules:[{required:!0,message:"Fields is required!"}],children:Object(P.jsx)(Ae,{title:"product",data:s,setValue:function(e){var t=s.findIndex((function(t){return t._id===e})),n=s[t];b(s[t]),d.setFieldsValue({product:e,actualStock:n.inStock})}})})}),void 0!==(null===u||void 0===u?void 0:u._id)?Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)(g.a,{xs:24,md:{span:11,offset:0},children:Object(P.jsx)(O.a.Item,{name:"actualStock",rules:[{required:!0,message:"Fields is required!"}],children:Object(P.jsx)(Y.a,{disabled:!0,min:0,placeholder:"in stock",style:{width:"100%"}})})}),Object(P.jsx)(g.a,{xs:24,md:{span:11,offset:2},children:Object(P.jsx)(O.a.Item,{name:"newStock",rules:[{required:!0,message:"Fields is required!"}],children:Object(P.jsx)(Y.a,{min:0,placeholder:"new Stock",style:{width:"100%"}})})}),Object(P.jsx)(g.a,{xs:24,md:{span:11,offset:0},children:Object(P.jsx)(O.a.Item,{name:"adjustStockType",rules:[{required:!0,message:"Fields is required!"}],children:Object(P.jsxs)(M.a,{placeholder:"type",style:{width:"100%"},children:[Object(P.jsx)(qe,{value:!0,children:"\u178a\u17be\u1798\u1782\u17d2\u179a\u17b6"}),Object(P.jsx)(qe,{value:!1,children:"Adjust"})]})})}),Object(P.jsx)(g.a,{xs:24,md:{span:11,offset:2},children:Object(P.jsx)(O.a.Item,{name:"remark",children:Object(P.jsx)(F.a,{placeholder:"remark"})})}),Object(P.jsx)(g.a,{xs:24,children:Object(P.jsx)(v.a,{htmlType:"submit",type:"primary",style:{width:"100%"},children:"SAVE"})})]}):null]})})})}x.a.Meta;function ze(){var e,t=O.a.useForm(),r=Object(h.a)(t,1)[0],a=Object(c.useState)(!1),s=Object(h.a)(a,2),i=s[0],d=s[1],o=Object(c.useRef)(),I=Object(c.useState)({}),w=Object(h.a)(I,2),C=w[0],N=w[1],D=Object(c.useState)([]),M=Object(h.a)(D,2),Y=M[0],V=M[1],B=n(41),H=Object(c.useState)(!1),K=Object(h.a)(H,2),$=K[0],J=K[1],W=Object(c.useState)(!1),Z=Object(h.a)(W,2),X=(Z[0],Z[1],Object(c.useState)("")),ee=Object(h.a)(X,2),ne=ee[0],ce=ee[1],re=Object(c.useState)({}),ae=Object(h.a)(re,2),ie=ae[0],le=ae[1],je=Object(c.useState)(!1),oe=Object(h.a)(je,2),ue=oe[0],be=oe[1],he=Object(c.useState)(!1),xe=Object(h.a)(he,2),Oe=xe[0],pe=xe[1],me=Object(c.useState)(!1),ve=Object(h.a)(me,2),fe=ve[0],ge=ve[1],Fe=Object(c.useState)([]),ke=Object(h.a)(Fe,2),Se=ke[0],Ie=ke[1],Ce=Object(c.useState)([]),Ae=Object(h.a)(Ce,2),Ee=Ae[0],Ne=Ae[1],Pe=Object(c.useState)(0),qe=Object(h.a)(Pe,2),ze=qe[0],_e=qe[1],Qe=function(){var e=Object(b.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,B.get("api/product");case 3:t=e.sent,n=t.data,console.log(n,"not set"),n&&(Ne(n),V(n)),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.log("error : "+e.t0),p.b.error(e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){Qe(),J(!1)}),[$,ne]);var Le=function(){var e=Object(b.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,B.get("api/dashboard");case 3:t=e.sent,(n=t.data)&&le(n),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("error dash : "+e.t0),p.b.error(e.t0.message);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){Le(),J(!1)}),[$]);var Re,Me,Ye,Ve,Ge,Ue=function(e){var t=Se.findIndex((function(t){return t._id===e._id})),n=[].concat(Object(j.a)(Se),[{_id:e._id,name:e.name,qty:1,price:e.price,product:e._id}]);if(t>-1){var c=Object(l.a)(Object(l.a)({},Se[t]),{},{qty:Se[t].qty+1});n=[].concat(Object(j.a)(Se.slice(0,t)),[c],Object(j.a)(Se.slice(t+1)))}_e(He(n)),Ie(n)},Be=function(e){N(e),d(!0)},He=function(e){var t=0;return null===e||void 0===e||e.map((function(e,n){t+=e.price*e.qty})),t},Ke=function(){var e=Object(b.a)(u.a.mark((function e(t){var n,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,B.post("api/order",t);case 3:n=e.sent,!0===(c=n.data).success?(J(!0),r.resetFields(),_e(0),Ie([]),p.b.success("Order has confirmed!")):p.b.error(c.message),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),p.b.error(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),$e=0,Je=0;(null===ie||void 0===ie||null===(e=ie.totalSale)||void 0===e?void 0:e.length)>0&&($e=null===ie||void 0===ie||null===(Re=ie.totalSale[(null===ie||void 0===ie||null===(Me=ie.totalSale)||void 0===Me?void 0:Me.length)-1])||void 0===Re?void 0:Re.total,Je=(null===ie||void 0===ie||null===(Ye=ie.totalSaleToday)||void 0===Ye?void 0:Ye.length)>0?null===ie||void 0===ie||null===(Ve=ie.totalSaleToday[(null===ie||void 0===ie||null===(Ge=ie.totalSaleToday)||void 0===Ge?void 0:Ge.length)-1])||void 0===Ve?void 0:Ve.total:0);var We=Object(P.jsxs)(m.a,{children:[Object(P.jsx)(m.a.Item,{onClick:function(){return be(!0)},children:Object(P.jsxs)("button",{style:{width:"100%"},className:"btn-grad",children:[Object(P.jsx)(_.a,{})," NEW"]})},"1"),Object(P.jsx)(m.a.Item,{onClick:function(){return pe(!0)},children:Object(P.jsxs)(v.a,{style:{width:"100%"},children:[Object(P.jsx)(Q.a,{})," EDIT"]})},"2"),Object(P.jsx)(m.a.Item,{onClick:function(){return ge(!0)},children:Object(P.jsxs)(v.a,{style:{width:"100%"},children:[Object(P.jsx)(L.a,{})," Adjust Stock"]})},"3")]});return Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)(f.a,{width:800,visible:i,footer:[Object(P.jsx)(de.a,{trigger:function(){return Object(P.jsx)("button",{type:"primary",className:"btn-grad",children:"PRINT INVOICE"})},content:function(){return o.current}},"2")],onCancel:function(){return d(!1)},children:Object(P.jsx)(se,{ref:o,printData:C})}),Object(P.jsx)(G,{open:ue,setOpen:be,setSuccess:J}),Object(P.jsx)(Te,{open:Oe,setOpen:pe,setSuccess:J,productList:Ee}),Object(P.jsx)(De,{open:fe,setOpen:ge,setSuccess:J,productList:Ee}),Object(P.jsxs)(y.a,{style:{margin:"0 auto"},children:[Object(P.jsx)(g.a,{xs:24,md:6,style:{padding:10},children:Object(P.jsx)(x.a,{className:"card-menu",style:{height:150},children:Object(P.jsxs)(y.a,{children:[Object(P.jsxs)(g.a,{xs:12,children:[Object(P.jsx)("h3",{children:"TOTAL PRODUCT"}),Object(P.jsx)("div",{style:{fontSize:20},children:(null===ie||void 0===ie?void 0:ie.totalProduct)>0?null===ie||void 0===ie?void 0:ie.totalProduct:0})]}),Object(P.jsx)(g.a,{xs:12,children:"salelist"!==ne?Object(P.jsx)("button",{className:"btn-grad",onClick:function(){return ce("salelist")},style:{width:"100%",backgroundColor:"#ff8b8c",color:"#FFFFFF"},children:"Sale List"}):null})]})})}),Object(P.jsx)(g.a,{xs:24,md:6,style:{padding:10},children:Object(P.jsx)(x.a,{className:"card-menu",style:{height:150},children:Object(P.jsxs)(y.a,{children:[Object(P.jsxs)(g.a,{xs:12,children:[Object(P.jsx)("h3",{children:"TOTAL SALE"}),Object(P.jsxs)("div",{style:{fontSize:20},children:[E($e*T)," \u17db"]})]}),Object(P.jsxs)(g.a,{xs:12,children:["orderlist"!==ne?Object(P.jsx)("button",{className:"btn-grad",onClick:function(){return ce("orderlist")},style:{width:"100%",backgroundColor:"#ff8b8c",color:"#FFFFFF"},children:"Order List"}):null,Object(P.jsxs)("h3",{children:["Today ",Object(P.jsx)("br",{})," ",E(Je*T)," \u17db"]})]})]})})}),Object(P.jsx)(g.a,{xs:24,md:12,children:Object(P.jsxs)(y.a,{children:[Object(P.jsx)(g.a,{xs:24,md:8,style:{padding:10},children:Object(P.jsxs)(v.a,{className:"card-menu",onClick:function(){return ce("")},style:{width:"100%",height:150,backgroundColor:"#ff8b8c",color:"#FFFFFF"},children:[Object(P.jsx)("h3",{style:{color:"#FFFFFF"},children:"NEW ORDER"}),Object(P.jsx)("div",{style:{fontSize:38},children:Object(P.jsx)(_.a,{})})]})}),Object(P.jsx)(g.a,{xs:24,md:8,style:{padding:10},children:Object(P.jsxs)(v.a,{className:"card-menu",onClick:function(){return ce("purchase")},style:{width:"100%",height:150,backgroundColor:"#ff8b8c",color:"#FFFFFF"},children:[Object(P.jsx)("h3",{style:{color:"#FFFFFF"},children:"PURCHASE"}),Object(P.jsx)("div",{style:{fontSize:38},children:Object(P.jsx)(R.a,{})})]})}),Object(P.jsx)(g.a,{xs:24,md:8,style:{padding:10},children:Object(P.jsxs)(v.a,{className:"card-menu",onClick:function(){return ce("stock")},style:{width:"100%",height:150,backgroundColor:"#ff8b8c",color:"#FFFFFF"},children:[Object(P.jsx)("h3",{style:{color:"#FFFFFF"},children:"STOCK"}),Object(P.jsx)("div",{style:{fontSize:38},children:Object(P.jsx)(L.a,{})})]})})]})})]}),Object(P.jsx)("br",{}),Object(P.jsx)("br",{}),""===ne?Object(P.jsxs)(y.a,{children:[Object(P.jsxs)(g.a,{xs:24,md:12,style:{backgroundColor:"#F7F9FC",padding:10},children:[Object(P.jsx)(O.a,{form:r,name:"addOrder",onFinish:function(e){var t=He(Se);Se.length>0?Ke(Object(l.a)(Object(l.a)({},e),{},{orderItems:Se,taxPrice:e.taxPrice>0?e.taxPrice:0,discount:e.discount>0?e.discount:0,totalPrice:t})):p.b.warning("No order!")},onFinishFailed:function(e){console.log("Failed:",e)},children:Object(P.jsxs)(y.a,{children:[Object(P.jsx)(g.a,{xs:6,style:{padding:5},children:Object(P.jsx)(O.a.Item,{name:"invoiceID",rules:[{required:!0,message:"Field is required!"}],children:Object(P.jsx)(F.a,{placeholder:"#INVOICE"})})}),Object(P.jsx)(g.a,{xs:6,style:{padding:5},children:Object(P.jsx)(O.a.Item,{name:"client",rules:[{required:!0,message:"Field is required!"}],children:Object(P.jsx)(F.a,{placeholder:"customer"})})}),Object(P.jsx)(g.a,{xs:12,style:{padding:5},children:Object(P.jsx)(O.a.Item,{name:"shippingAddress",rules:[{required:!0,message:"Field is required!"}],children:Object(P.jsx)(F.a,{placeholder:"address"})})}),Object(P.jsx)(g.a,{xs:3,style:{padding:5},children:Object(P.jsx)(O.a.Item,{name:"taxPrice",children:Object(P.jsx)(F.a,{type:"number",placeholder:"tax %"})})}),Object(P.jsx)(g.a,{xs:3,style:{padding:5},children:Object(P.jsx)(O.a.Item,{name:"discount",children:Object(P.jsx)(F.a,{type:"number",placeholder:"dis %"})})}),Object(P.jsx)(g.a,{xs:6,style:{padding:5},children:Object(P.jsx)(O.a.Item,{name:"deliveredBy",children:Object(P.jsx)(F.a,{placeholder:"deliver by"})})}),Object(P.jsx)(g.a,{xs:6,style:{padding:5},children:Object(P.jsx)(O.a.Item,{name:"clientTel",children:Object(P.jsx)(F.a,{placeholder:"tel"})})}),Object(P.jsx)(g.a,{xs:6,style:{padding:5},children:Object(P.jsx)(O.a.Item,{name:"remark",children:Object(P.jsx)(F.a,{placeholder:"remark"})})}),Object(P.jsx)(g.a,{xs:4,style:{padding:5},children:Object(P.jsx)(O.a.Item,{children:Object(P.jsx)(v.a,{style:{width:"100%"},htmlType:"submit",className:"btn-grad",children:"CONFIRM"})})}),Object(P.jsx)(g.a,{xs:4,style:{padding:5},children:Object(P.jsx)(O.a.Item,{children:Object(P.jsx)(v.a,{onClick:function(){return r.resetFields(),_e(0),Ie([]),void p.b.warn("Order has cancelled!")},style:{width:"100%"},type:"danger",disabled:(null===Se||void 0===Se?void 0:Se.length)<=0,children:"CANCEL"})})})]})}),Object(P.jsx)(k.a,{columns:q({handleRemoveOrder:function(e){var t=Se.findIndex((function(t){return t._id===e}));Se.splice(t,1),Ie(Object(j.a)(Se)),_e(He(Se))},handlePlusQty:function(e){var t=Se.findIndex((function(t){return t._id===e._id})),n=Object(l.a)(Object(l.a)({},Se[t]),{},{qty:Se[t].qty+1}),c=[].concat(Object(j.a)(Se.slice(0,t)),[n],Object(j.a)(Se.slice(t+1)));_e(He(c)),Ie(c)},handleMinusQty:function(e){var t=Se.findIndex((function(t){return t._id===e._id})),n=Object(l.a)(Object(l.a)({},Se[t]),{},{qty:Se[t].qty-1}),c=[].concat(Object(j.a)(Se.slice(0,t)),[n],Object(j.a)(Se.slice(t+1)));_e(He(c)),Ie(c)},handleEditQty:function(e){var t=Se.findIndex((function(t){return t._id===e._id})),n=Object(l.a)(Object(l.a)({},Se[t]),{},{qty:e.newValue}),c=[].concat(Object(j.a)(Se.slice(0,t)),[n],Object(j.a)(Se.slice(t+1)));_e(He(c)),Ie(c)}}),dataSource:Se,pagination:!1}),Object(P.jsxs)("h2",{style:{textAlign:"right"},children:["Total Price: ",A(ze)]}),Object(P.jsxs)("h2",{style:{textAlign:"right"},children:["Riel: ",E(ze*T)," \u17db"]})]}),Object(P.jsx)(g.a,{xs:24,md:12,style:{backgroundColor:"#F7F9FC"},children:Object(P.jsxs)(y.a,{children:[Object(P.jsx)(g.a,{xs:24,md:24,children:Object(P.jsxs)(y.a,{children:[Object(P.jsx)(g.a,{xs:20,style:{padding:10},children:Object(P.jsx)(F.a,{onChange:function(e){return function(e){var t=Ee.filter((function(t){return t.name.toUpperCase().includes(e.toUpperCase())}));V(e?t:Ee)}(e.target.value)},placeholder:"Search for..."})}),Object(P.jsx)(g.a,{xs:2,style:{padding:10},children:Object(P.jsx)(S.a.Button,{style:{width:"100%"},overlay:We})})]})}),Object(P.jsx)(g.a,{xs:24,children:Object(P.jsx)(y.a,{style:{maxHeight:500,overflowY:"scroll",width:"100%"},children:null===Y||void 0===Y?void 0:Y.map((function(e,t){return Object(P.jsx)(z,{item:e,handleClick:Ue})}))})})]})})]}):null,"orderlist"===ne?Object(P.jsx)(y.a,{children:Object(P.jsx)(g.a,{xs:24,style:{padding:10},children:Object(P.jsx)(te,{handlePrintInvoice:Be})})}):null,"salelist"===ne?Object(P.jsx)(y.a,{children:Object(P.jsx)(g.a,{xs:24,style:{padding:10},children:Object(P.jsx)(U,{handlePrintInvoice:Be})})}):null,"purchase"===ne?Object(P.jsx)(y.a,{children:Object(P.jsx)(g.a,{xs:24,style:{padding:10},children:Object(P.jsx)(ye,{productData:Ee})})}):null,"stock"===ne?Object(P.jsx)(y.a,{children:Object(P.jsx)(g.a,{xs:24,style:{padding:10},children:Object(P.jsx)(we,{productData:Ee})})}):null]})}var _e=n(178);var Qe=function(){return Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)(_e.a,{children:Object(P.jsx)("title",{children:"MINI POS"})}),Object(P.jsx)(i.a,{children:Object(P.jsx)(d.c,{children:Object(P.jsx)(d.a,{path:"/",children:Object(P.jsx)(ze,{})})})})]})},Le=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,323)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),c(e),r(e),a(e),s(e)}))};s.a.render(Object(P.jsx)(r.a.StrictMode,{children:Object(P.jsx)(Qe,{})}),document.getElementById("root")),Le()}},[[301,1,2]]]);
//# sourceMappingURL=main.ea6ec0b1.chunk.js.map